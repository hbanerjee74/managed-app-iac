{
  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
  "languageVersion": "2.0",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "bicep",
      "version": "0.39.26.7824",
      "templateHash": "6611002162306895913"
    }
  },
  "functions": [
    {
      "namespace": "__bicep",
      "members": {
        "nano16": {
          "parameters": [
            {
              "type": "string",
              "name": "seed"
            },
            {
              "type": "string",
              "name": "suffix"
            }
          ],
          "output": {
            "type": "string",
            "value": "[toLower(format('{0}{1}', substring(uniqueString(format('{0}-{1}-a', parameters('seed'), parameters('suffix'))), 0, 8), substring(uniqueString(format('{0}-{1}-b', parameters('seed'), parameters('suffix'))), 0, 8)))]"
          }
        },
        "nano8": {
          "parameters": [
            {
              "type": "string",
              "name": "seed"
            },
            {
              "type": "string",
              "name": "suffix"
            }
          ],
          "output": {
            "type": "string",
            "value": "[toLower(substring(uniqueString(format('{0}-{1}-st', parameters('seed'), parameters('suffix'))), 0, 8))]"
          }
        }
      }
    }
  ],
  "parameters": {
    "resourceGroupName": {
      "type": "string",
      "metadata": {
        "description": "Resource group name used as seed for deterministic nanoid generation."
      }
    },
    "purpose": {
      "type": "string",
      "defaultValue": "platform",
      "metadata": {
        "description": "Logical purpose string to include in names (e.g., platform)."
      }
    },
    "seedPrefix": {
      "type": "string",
      "defaultValue": "[parameters('resourceGroupName')]"
    }
  },
  "variables": {
    "names": {
      "uami": "[format('vd-uami-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'uami'))]",
      "vnet": "[format('vd-vnet-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'vnet'))]",
      "nsgAppgw": "[format('vd-nsg-appgw-{0}', __bicep.nano16(parameters('seedPrefix'), 'nsgappgw'))]",
      "nsgAks": "[format('vd-nsg-aks-{0}', __bicep.nano16(parameters('seedPrefix'), 'nsgaks'))]",
      "nsgAppsvc": "[format('vd-nsg-appsvc-{0}', __bicep.nano16(parameters('seedPrefix'), 'nsgappsvc'))]",
      "nsgPe": "[format('vd-nsg-pe-{0}', __bicep.nano16(parameters('seedPrefix'), 'nsgpe'))]",
      "kv": "[format('vd-kv-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'kv'))]",
      "storage": "[format('vdst{0}{1}', parameters('purpose'), __bicep.nano8(parameters('seedPrefix'), 'st'))]",
      "acr": "[format('vd-acr-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'acr'))]",
      "law": "[format('vd-law-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'law'))]",
      "asp": "[format('vd-asp-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'asp'))]",
      "appApi": "[format('vd-app-api-{0}', __bicep.nano16(parameters('seedPrefix'), 'appapi'))]",
      "appUi": "[format('vd-app-ui-{0}', __bicep.nano16(parameters('seedPrefix'), 'appui'))]",
      "funcOps": "[format('vd-func-ops-{0}', __bicep.nano16(parameters('seedPrefix'), 'func'))]",
      "agw": "[format('vd-agw-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'agw'))]",
      "pipAgw": "[format('vd-pip-agw-{0}', __bicep.nano16(parameters('seedPrefix'), 'pipagw'))]",
      "psql": "[format('vd-psql-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'psql'))]",
      "search": "[format('vd-search-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'search'))]",
      "ai": "[format('vd-ai-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'ai'))]",
      "automation": "[format('vd-aa-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'aa'))]",
      "logic": "[format('vd-logic-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'logic'))]",
      "peKv": "[format('vd-pe-kv-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pekv'))]",
      "peStBlob": "[format('vd-pe-st-blob-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pestblob'))]",
      "peStQueue": "[format('vd-pe-st-queue-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pestqueue'))]",
      "peStTable": "[format('vd-pe-st-table-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pesttable'))]",
      "peAcr": "[format('vd-pe-acr-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'peacr'))]",
      "peAppApi": "[format('vd-pe-app-api-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'peappapi'))]",
      "peAppUi": "[format('vd-pe-app-ui-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'peappui'))]",
      "peFunc": "[format('vd-pe-func-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pefunc'))]",
      "peSearch": "[format('vd-pe-search-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pesearch'))]",
      "peAi": "[format('vd-pe-ai-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'peai'))]",
      "peAutomation": "[format('vd-pe-aa-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'peaa'))]",
      "peKvDns": "[format('vd-pdns-kv-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnskv'))]",
      "peStBlobDns": "[format('vd-pdns-st-blob-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsstblob'))]",
      "peStQueueDns": "[format('vd-pdns-st-queue-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsstqueue'))]",
      "peStTableDns": "[format('vd-pdns-st-table-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnssttable'))]",
      "peAcrDns": "[format('vd-pdns-acr-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsacr'))]",
      "peAppApiDns": "[format('vd-pdns-app-api-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsappapi'))]",
      "peAppUiDns": "[format('vd-pdns-app-ui-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsappui'))]",
      "peFuncDns": "[format('vd-pdns-func-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsfunc'))]",
      "peSearchDns": "[format('vd-pdns-search-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnssearch'))]",
      "peAiDns": "[format('vd-pdns-ai-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsai'))]",
      "peAutomationDns": "[format('vd-pdns-aa-{0}-{1}', parameters('purpose'), __bicep.nano16(parameters('seedPrefix'), 'pdnsaa'))]",
      "diagKv": "[format('vd-diag-kv-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagkv'))]",
      "diagSt": "[format('vd-diag-st-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagst'))]",
      "diagAcr": "[format('vd-diag-acr-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagacr'))]",
      "diagAppApi": "[format('vd-diag-app-api-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagappapi'))]",
      "diagAppUi": "[format('vd-diag-app-ui-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagappui'))]",
      "diagFunc": "[format('vd-diag-func-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagfunc'))]",
      "diagAgw": "[format('vd-diag-agw-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagagw'))]",
      "diagPsql": "[format('vd-diag-psql-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagpsql'))]",
      "diagSearch": "[format('vd-diag-search-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagsearch'))]",
      "diagAi": "[format('vd-diag-ai-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagai'))]",
      "diagAutomation": "[format('vd-diag-aa-{0}', __bicep.nano16(parameters('seedPrefix'), 'diagaa'))]",
      "diagLogic": "[format('vd-diag-logic-{0}', __bicep.nano16(parameters('seedPrefix'), 'diaglogic'))]"
    }
  },
  "resources": {},
  "outputs": {
    "names": {
      "type": "object",
      "value": "[variables('names')]"
    }
  }
}